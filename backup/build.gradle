
plugins {
    id "java"
    id "com.github.johnrengelman.shadow" version "7.1.2"
}

group "supernote-backup"
version = "0.1"

ext {
    mainApplicationClass = "com.kdiller.supernote.backup.Application"
}

repositories {
    mavenCentral()
}

dependencies {
    // Logging library
    implementation group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.11'
    
    // JSON Parsing
    implementation group: 'org.json', name: 'json', version: '20230618'
}

jar {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE

    manifest {
        attributes "Main-Class": "$mainApplicationClass"
    }
}

task run(type: JavaExec) {
    group 'application'

    mainClass = "$mainApplicationClass"
    classpath = sourceSets.main.runtimeClasspath
}

// Useful task to see what is being used
task copyDependencies(type: Copy) {
    description 'Copies Gradle libs into build directory for external use (e.g. by non-Gradle projects).'
    group 'build'
    from configurations.runtimeClasspath
    into new File(buildDir, "gradle-dependencies")
}

clean.doFirst{
    delete "log"
}
